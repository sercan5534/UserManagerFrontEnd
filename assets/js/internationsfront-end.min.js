/*! internationsfront-end 2016-09-12 */

window.APP=angular.module("internationsapp",["ngRoute","ui.bootstrap","ngSanitize"]),APP.config(["$routeProvider",function($routeProvider){$routeProvider.when("/",{templateUrl:"/app/main/view/dashboardView.html",controller:"dashboardController"}).when("/user",{templateUrl:"/app/user/view/userListView.html",controller:"userListController"}).when("/user/:id",{templateUrl:"/app/user/view/userDetailView.html",controller:"userDetailController"}).when("/group",{templateUrl:"/app/group/view/groupListView.html",controller:"groupListController"}).when("/group/:id",{templateUrl:"/app/group/view/groupDetailView.html",controller:"groupDetailController"}).when("/error",{templateUrl:"/app/main/view/error.html",controller:"errorController"}).otherwise({templateUrl:"/app/main/view/error.html",controller:"errorController"})}]),APP.factory("apiFactory",["$http","$location",function($http,$location){function handleError(callback,response){$location.path("/error")}var urlBase="https://internations.herokuapp.com/api/",factory={};return factory.getUserList=function(callback){return $http.get(urlBase+"user").then(function(response){callback(response.data)},function(response){handleError(callback,response)})},factory.getUserById=function(id,callback){return $http.get(urlBase+"user/"+id).then(function(response){callback(response.data)},function(response){handleError(callback,response)})},factory.getUsersByGroupId=function(id,callback){return $http.get(urlBase+"user/all/"+id).then(function(response){callback(response.data)},function(response){handleError(callback,response)})},factory.deleteUserById=function(id,callback){return $http["delete"](urlBase+"user/"+id).then(function(response){callback(response.data)},function(response){handleError(callback,response)})},factory.addUser=function(callback,data){return $http.post(urlBase+"user",data).then(function(response){callback(response.data)},function(response){handleError(callback,response)})},factory.getGroupList=function(callback){return $http.get(urlBase+"group").then(function(response){callback(response.data)},function(response){handleError(callback,response)})},factory.getGroupById=function(id,callback){return $http.get(urlBase+"group/"+id).then(function(response){callback(response.data)},function(response){handleError(callback,response)})},factory.deleteGroupById=function(id,callback){return $http["delete"](urlBase+"group/"+id).then(function(response){callback(response.data)},function(response){handleError(callback,response)})},factory.addGroup=function(callback,data){return $http.post(urlBase+"group",data).then(function(response){callback(response.data)},function(response){handleError(callback,response)})},factory}]),APP.controller("groupDetailController",["$scope","apiFactory","$uibModal","$routeParams",function($scope,apiFactory,$uibModal,$routeParams){$scope.groupDetail={},$scope.getGroupDetail=function(id){apiFactory.getGroupById(id,function(res){$scope.groupDetail=res.data})},$scope.getUsersByGroupId=function(id){apiFactory.getUsersByGroupId(id,function(res){$scope.userList=res.data})},$scope.getUsersByGroupId($routeParams.id),$scope.getGroupDetail($routeParams.id)}]),APP.controller("groupListController",["$scope","apiFactory","$uibModal","$location",function($scope,apiFactory,$uibModal,$location){$scope.groupList=[],$scope.getGroupList=function(){apiFactory.getGroupList(function(res){$scope.groupList=res.data})},$scope.closeAlert=function(index){$scope.alerts.splice(index,1)},$scope.openDetail=function(index){$location.path("/group/"+index)},$scope.openAddModal=function(){var modalInstance=$uibModal.open({animation:!0,templateUrl:"addGroupModal.html",controller:"addGroupModalInsCtrl",size:"md",scope:$scope});modalInstance.opened.then(function(){$scope.newUser={}}),modalInstance.result.then(function(data){$scope.addGroup(data)})},$scope.addGroup=function(data){apiFactory.addGroup(function(res){$scope.getGroupList()},data)},$scope.deleteGroup=function(id){apiFactory.deleteGroupById(id,function(res){$scope.alerts.push({msg:res.message}),$scope.getGroupList()})},$scope.getGroupList()}]),APP.controller("addGroupModalInsCtrl",function($scope,$uibModalInstance){$scope.cancel=function(){$uibModalInstance.dismiss("close")},$scope.save=function(){$uibModalInstance.close($scope.newGroup)}}),APP.controller("dashboardController",["$scope","apiFactory","$location",function($scope,apiFactory,$location){$scope.alerts=[],$scope.getUserList=function(){apiFactory.getUserList(function(res){$scope.userList=res.data})},$scope.getGroupList=function(){apiFactory.getGroupList(function(res){$scope.groupList=res.data})},$scope.closeAlert=function(index){$scope.alerts.splice(index,1)},$scope.openGroupDetail=function(index){$location.path("/group/"+index)},$scope.openUserDetail=function(index){$location.path("/user/"+index)},$scope.deleteGroup=function(id){apiFactory.deleteGroupById(id,function(res){$scope.alerts.push({msg:res.message}),$scope.getGroupList()})},$scope.deleteUser=function(id){apiFactory.deleteUserById(id,function(res){$scope.alerts.push({msg:res.message}),$scope.getUserList()})},$scope.getGroupList(),$scope.getUserList()}]),APP.controller("errorController",["$scope",function($scope){}]),APP.controller("userDetailController",["$scope","apiFactory","$uibModal","$routeParams",function($scope,apiFactory,$uibModal,$routeParams){$scope.userDetail={},$scope.getUserDetail=function(id){apiFactory.getUserById(id,function(res){$scope.userDetail=res.data})},$scope.getUserDetail($routeParams.id)}]),APP.controller("userListController",["$scope","apiFactory","$uibModal","$location",function($scope,apiFactory,$uibModal,$location){$scope.alerts=[],$scope.userList=[],$scope.groupList=[],$scope.getUserList=function(){apiFactory.getUserList(function(res){$scope.userList=res.data})},$scope.getGroupList=function(){apiFactory.getGroupList(function(res){$scope.groupList=res.data})},$scope.closeAlert=function(index){$scope.alerts.splice(index,1)},$scope.openAddModal=function(){var modalInstance=$uibModal.open({animation:!0,templateUrl:"addModal.html",controller:"addNModalInsCtrl",size:"md",scope:$scope});modalInstance.opened.then(function(){$scope.newUser={}}),modalInstance.result.then(function(data){$scope.addUser(data)})},$scope.addUser=function(data){apiFactory.addUser(function(res){$scope.getUserList()},data)},$scope.deleteUser=function(id){apiFactory.deleteUserById(id,function(res){$scope.alerts.push({msg:res.message}),$scope.getUserList()})},$scope.openDetail=function(index){$location.path("/user/"+index)},$scope.getUserList(),$scope.getGroupList()}]),APP.controller("addNModalInsCtrl",function($scope,$uibModalInstance){$scope.cancel=function(){$uibModalInstance.dismiss("close")},$scope.save=function(){$scope.newUser.groupList=1,$uibModalInstance.close($scope.newUser)}});
//# sourceMappingURL=internationsfront-end.min.js.map